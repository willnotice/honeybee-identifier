<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Final SEO & Social Media Tags -->
    <title>Is It a Honeybee? - AI Bee Identifier</title>
    <meta name="title" content="Is It a Honeybee? - AI Bee Identifier">
    <meta name="description" content="Don't guess, know for sure. Upload a photo to instantly identify if an insect is a honeybee with our free AI tool before you call a beekeeper.">

    <!-- Favicon - Create a 32x32 favicon.png and add it to your project folder -->
   <link rel="icon" type="image/svg+xml" href="/favicon.svg">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://isitahoneybee.com/">
    <meta property="og:title" content="Is It a Honeybee? - AI Bee Identifier">
    <meta property="og:description" content="Instantly identify if an insect is a honeybee with our free AI tool.">
    <!-- Create a 1200x630 social-preview.png and add it to your project folder -->
    <meta property="og:image" content="https://isitahoneybee.com/social-preview.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://isitahoneybee.com/">
    <meta property="twitter:title" content="Is It a Honeybee? - AI Bee Identifier">
    <meta property="twitter:description" content="Instantly identify if an insect is a honeybee with our free AI tool.">
    <!-- The same social-preview.png will be used here -->
    <meta property="twitter:image" content="https://isitahoneybee.com/social-preview.png">

    <!-- Google Analytics Snippet (Optional) - Paste your code here -->

    <!-- Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .loader {
            border-top-color: #f59e0b;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .drag-over {
            border-color: #f59e0b;
            background-color: #fffbeb;
        }
    </style>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FH9MVCMPHZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FH9MVCMPHZ');
</script>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-5xl">
        <!-- Header Section -->
        <header class="text-center mb-10">
            <div class="inline-block bg-amber-400 p-3 rounded-full mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 256 256" fill="white" role="img" aria-labelledby="beeIconTitle">
                 <title id="beeIconTitle">Bee icon</title>
                 <path d="M232,128..."/>
                </svg>
            </div>
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900">Bee, Wasp, or Hornet?</h1>
            <p class="text-lg text-gray-600 mt-3 max-w-2xl mx-auto">Don't guess, know for sure. Our AI tool helps you identify if that buzzing insect is a honeybee before you call a beekeeper.</p>
        </header>

        <!-- Main Content -->
        <main class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl border border-gray-100">
            <div id="upload-section" class="fade-in">
                <label for="image-upload" class="block text-xl font-bold text-gray-800 mb-4 text-center">Upload Your Image</label>
                <div id="drop-zone" class="mt-1 flex justify-center px-6 pt-10 pb-10 border-2 border-gray-300 border-dashed rounded-lg transition-colors duration-300">
                    <div class="space-y-1 text-center">
                        <svg class="mx-auto h-12 w-12 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l-3 3m3-3l3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.33-2.13 3 3 0 01.11 5.825" />
                        </svg>
                        <div class="flex text-sm text-gray-600">
                            <label for="image-upload" class="relative cursor-pointer bg-white rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none">
                                <span>Click to upload</span>
                                <input id="image-upload" name="image-upload" type="file" class="sr-only" accept="image/*">
                            </label>
                            <p class="pl-1">or drag and drop</p>
                        </div>
                        <p class="text-xs text-gray-500">PNG, JPG, or GIF</p>
                    </div>
                </div>
            </div>

            <!-- Preview and Identify Section -->
            <div id="preview-section" class="hidden mt-8 text-center">
                <img id="image-preview" src="#" alt="Image preview" class="max-w-full max-h-80 mx-auto rounded-lg shadow-md border">
                <button id="identify-button" class="mt-6 bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 px-8 rounded-lg text-lg transition duration-300 ease-in-out transform hover:scale-105 disabled:bg-gray-400">
                    Identify Insect
                </button>
            </div>

            <!-- Results Section -->
            <div id="results-container" class="mt-10 hidden">
                 <div class="w-full h-px bg-gray-200 my-8"></div>
                <div id="loader" class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mx-auto hidden"></div>
                <div id="results-content" class="hidden">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 text-center">Analysis Complete</h2>
                    <div id="identification-result" class="p-6 bg-gray-50 border rounded-lg">
                        <!-- API response will be inserted here -->
                    </div>
                    <!-- Reset button -->
                    <div class="text-center mt-6">
                        <button id="reset-button" class="bg-gray-700 hover:bg-gray-800 text-white font-bold py-3 px-8 rounded-lg text-lg transition duration-300 ease-in-out transform hover:scale-105">
                            Test Another Image
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <footer class="text-center mt-10 text-gray-500 text-sm">
            <p>&copy; 2024 isitahoneybee.com. Created for clarity.</p>
        </footer>
    </div>

    <script>
        // Get all the elements
        const dropZone = document.getElementById('drop-zone');
        const imageUpload = document.getElementById('image-upload');
        const uploadSection = document.getElementById('upload-section');
        const previewSection = document.getElementById('preview-section');
        const imagePreview = document.getElementById('image-preview');
        const identifyButton = document.getElementById('identify-button');
        const resultsContainer = document.getElementById('results-container');
        const loader = document.getElementById('loader');
        const resultsContent = document.getElementById('results-content');
        const identificationResult = document.getElementById('identification-result');
        const resetButton = document.getElementById('reset-button');

        let base64ImageData = "";

        // Function to handle file processing
        const handleFile = (file) => {
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    imagePreview.src = e.target.result;
                    uploadSection.classList.add('hidden');
                    previewSection.classList.remove('hidden');
                    previewSection.classList.add('fade-in');
                    resultsContainer.classList.add('hidden');
                    resultsContent.classList.add('hidden');
                    base64ImageData = e.target.result.split(',')[1];
                };
                reader.readAsDataURL(file);
            }
        };

        // Function to reset the UI to its initial state
        const resetUI = () => {
            previewSection.classList.add('hidden');
            resultsContainer.classList.add('hidden');
            uploadSection.classList.remove('hidden');
            uploadSection.classList.add('fade-in');
            imageUpload.value = null;
            base64ImageData = "";
            imagePreview.src = "#";
        };

        // Event listeners
        imageUpload.addEventListener('change', (event) => handleFile(event.target.files[0]));
        dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('drag-over'); });
        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));
        dropZone.addEventListener('drop', (e) => { e.preventDefault(); dropZone.classList.remove('drag-over'); handleFile(e.dataTransfer.files[0]); });
        resetButton.addEventListener('click', resetUI);

        // Identify button click
        identifyButton.addEventListener('click', async () => {
            if (!base64ImageData) return;
            resultsContainer.classList.remove('hidden');
            resultsContainer.classList.add('fade-in');
            loader.classList.remove('hidden');
            resultsContent.classList.add('hidden');
            identifyButton.disabled = true;
            identifyButton.textContent = 'Analyzing...';
            window.scrollTo(0, document.body.scrollHeight);
            try {
                await callSecureAPI(base64ImageData);
            } catch (error) {
                console.error("Error:", error);
                identificationResult.innerHTML = `<p class="font-bold text-red-600">An error occurred.</p><p class="mt-2">${error.message}</p>`;
            } finally {
                loader.classList.add('hidden');
                resultsContent.classList.remove('hidden');
                resultsContent.classList.add('fade-in');
                identifyButton.disabled = false;
                identifyButton.textContent = 'Identify Insect';
            }
        });

        async function callSecureAPI(imageData) {
            const response = await fetch('/.netlify/functions/identify', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ imageData: imageData })
            });

            if (!response.ok) {
                throw new Error(`API request failed with status ${response.status}. Please try again.`);
            }

            const result = await response.json();
            
            if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                const text = result.candidates[0].content.parts[0].text;
                identificationResult.innerHTML = text;
            } else {
                identificationResult.innerHTML = '<p class="font-bold text-red-600">Could not identify the insect.</p><p class="mt-2">The AI response was empty or malformed. Please try a different image.</p>';
                console.error("Unexpected API response structure:", result);
            }
        }
    </script>
</body>
</html>
